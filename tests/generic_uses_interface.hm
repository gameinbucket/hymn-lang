
interface get_and_set
    get() int
    set(int)

interface read_and_write
    read() uint8
    write(uint8)

class foo implements get_and_set
    one int

class bar
    implements get_and_set and read_and_write
    two   int
    three uint8

foo get() int
    return self.one

foo set(value int)
    self.one = value

bar get() int
    return self.two

bar set(value int)
    self.two = value

bar read() uint8
    return self.three + uint8 1

bar write(value uint8)
    self.three += value

class baz
    four %x: get_and_set
    five %y: get_and_set + read_and_write
 
class baz<x:get_and_set, y:get_and_set+read_and_write>
    four x
    five y

def my_func(one %x: get_and_set, two %y: get_and_set + read_and_write)
    one.selt(8)
    two.set(9)
    two.write(uint8 10)
    echo(one.get())
    echo(two.get())
    echo(two.read())

def my_func<x:get_and_set, y:get_and_set+read_and_write>(one x, two y)
    one.selt(8)
    two.set(9)
    two.write(uint8 10)
    echo(one.get())
    echo(two.get())
    echo(two.read())

def main
    f = foo(2)
    echo(f.one)
    f.set(3)
    echo(f.get())

    b = bar(4, uint8 5)
    echo(b.two)
    echo(b.three)
    b.set(6)
    echo(b.get())
    b.write(uint8 7)
    echo(b.read())

    my_func(f, b)

    z = baz(f, b)
    echo(z.four.get())
    echo(z.five.get())
    echo(z.five.read())
