enum test_status
    passed
    failed
    ignored

class test
    package       string
    file_name     string
    function_name string
    messages      []string
    status        test_status

def new() test
    t = test (
        status: test_status.passed
    )
    return t

def test.error(message string)
    self.messages = push(self.messages, message)
    self.status = test_status.failed

def test.assert(expected string, actual string) bool
    if expected == actual: return true
    self.error("Expected `" + expected + "` but found `" + actual + "`")
    return false

def test.assert_true(b bool) bool
    if b: return true
    self.error("Expected `true` but found `false`")
    return false
